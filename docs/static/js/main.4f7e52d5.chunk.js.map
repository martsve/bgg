{"version":3,"sources":["modules/Configuration.js","modules/CounterWidget/CounterWidget.js","modules/CounterWidget/CW.js","modules/AddUserComponent/AddUserWidget.js","modules/AddUserComponent/AddUserComponent.js","modules/ErrorPages/index.js","modules/bgg/xml2json.js","modules/utilities/db.js","modules/bgg/index.js","modules/ViewUserComponent/GetBggDataWidget.js","modules/ViewUserComponent/ViewUserComponent.js","modules/Collection.js","store/state.js","store/reducer.js","store/index.js","modules/HomeComponent.js","modules/FilterCollectionComponent/FilterCollectionWidget.js","modules/FilterCollectionComponent/CreateGameDataUtility.js","modules/FilterCollectionComponent/GameDataCard.js","modules/FilterCollectionComponent/FilterCollectionComponent.js","Router/App.js","serviceWorker.js","index.js"],"names":["Configuration","props","dispatch","useDispatch","className","onClick","type","history","push","CounterWidget","count","setCounter","connect","state","AddUserWidget","addUser","useState","name","setName","value","onChange","e","target","users","NotFound","convertXml2Json","text","xml","tab","X","toObj","o","nodeType","attributes","length","i","nodeName","nodeValue","toString","firstChild","textChild","cdataChild","hasElementChild","n","nextSibling","match","removeWhite","nm","escape","Array","innerXml","na","documentElement","alert","toJson","ind","json","join","arr","m","replace","node","s","innerHTML","asXml","c","txt","normalize","nxt","removeChild","xml2json","dom","window","DOMParser","parseFromString","ActiveXObject","async","loadXML","parseError","reason","srcText","parseXml","indexedDB","mozIndexedDB","webkitIndexedDB","msIndexedDB","shimIndexedDB","IMAGES","DETAILS","CACHE","version","Promise","resolve","reject","request","open","onupgradeneeded","event","db","result","createObjectStore","keyPath","onsuccess","onerror","error","onblocked","console","log","add_to_db","conn","table","key","transaction","objectStore","put","id","data","get_from_db","get","add","a","close","bgg_config","DELAY","sleep","ms","setTimeout","fetchUntil","url","retries","mult","retryN","fetch","status","Math","pow","bgg","path","queryParams","qs","Object","entries","map","indexOf","cache","JSON","parse","then","x","obj","GetBggDataWidget","save","setData","details","setDetails","setImages","useEffect","getDetails","getNextDetails","list","stats","results","newDetails","slice","items","item","username","subtype","excludesubtype","own","keys","games","setId","params","user","style","marginTop","MainPage","UserList","activeClassName","to","borderTop","component","AddUserComponent","ViewUserComponent","CW","initialState","stateVersion","active","collection","reducer","action","localStorage","clear","deleteDatabase","DB","newState","delState","sort","sstate","getInitialState","getItem","reduceState","setItem","stringify","store","React","createContext","createStore","AllFilters","title","options","filter","playtime","minplayers","maxplayers","weight","year","rating","plays","numowned","suggestedPlayers","best","recommended","avoid","group","includes","language","toggle_filter","filters","change","newFilter","isActiveFilter","v","prev","find","encodeURIComponent","FilterCollectionWidget","f","onContextMenu","preventDefault","stopPropagation","rightClick","CreateCollectionFromUserDetails","dbKeys","all","g","allGames","values","CreateGameDataFromBggData","isArray","filtered","image","thumbnail","parseInt","yearpublished","parseFloat","playingtime","minage","maxplaytime","minplaytime","numplays","ranks","rank","bggrating","suggested","poll","num","votes_best","votes_recommended","langPoll","l1","l2","l3","l4","l5","link","statistics","ratings","averageweight","usersrated","GameDataCard","src","alt","maxWidth","maxHeight","AddUsersComponent","activeClass","GamesComponent","sortBy","split","desc","up","down","b","location","search","decodeURIComponent","reduce","selectedUsers","activeStateDetails","dbKey","filteredCollection","remValues","startsWith","removeActiveFilters","remaining","Set","toRemove","val","delete","from","union","activeFilters","applyFilters","rem_active","add_active","q","pathname","App","exact","HomeComponent","CollectionPage","FilterCollectionComponent","Boolean","hostname","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.4f7e52d5.chunk.js","sourcesContent":["import React from 'react';\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nconst Configuration = (props) => {\r\n  const dispatch = useDispatch();\r\n\r\n  function reset() {\r\n    dispatch({ type: \"RESET\" });\r\n    props.history.push('/');\r\n  }\r\n\r\n  return (<>\r\n    <div className=\"Main\">\r\n    <h1>Configuration</h1>\r\n    <button onClick={reset}>\r\n      Reset localstorage\r\n    </button>\r\n    </div>\r\n  </>);\r\n}\r\n\r\nexport default Configuration;","import React from 'react';\r\n\r\nconst CounterWidget = ({ count, setCounter }) => {\r\n  function increase() {\r\n    setCounter(count + 1);\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <p>i = {count}</p>\r\n      <button onClick={increase}>Increse</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CounterWidget;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { useDispatch } from \"react-redux\";\r\nimport CounterWidget from './CounterWidget';\r\n\r\nconst CW = ({ count }) => {\r\n  const dispatch = useDispatch();\r\n\r\n  return (\r\n    <>\r\n    <h1>Counter Widget</h1>\r\n    <CounterWidget count={count} setCounter={() => dispatch({ type: \"INCREMENT\" })} />\r\n    </>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  count: state.count\r\n});\r\n\r\nexport default connect(mapStateToProps)(CW);\r\n","import React, { useState } from 'react';\r\n\r\nconst AddUserWidget = ({ addUser }) => {\r\n  const [name, setName] = useState(\"\");  \r\n\r\n  let onClickAddUser = () => {\r\n    addUser(name);\r\n    setName(\"\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <input value={name} onChange={e => setName(e.target.value)} /> <button onClick={onClickAddUser}>Add</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AddUserWidget;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { useDispatch } from \"react-redux\";\r\nimport AddUserWidget from './AddUserWidget';\r\n\r\nconst AddUserComponent = ({ users, history }) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const addUser = (name) => {\r\n    dispatch({ type: \"ADDUSER\", value: name });\r\n    history.push('/collection/user/' + name);\r\n  }\r\n  return (\r\n    <>\r\n    <h1>Add data for a new user</h1>\r\n    <AddUserWidget addUser={addUser} />\r\n    </>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  users: state.users\r\n});\r\n\r\nexport default connect(mapStateToProps)(AddUserComponent);\r\n","import React from 'react';\r\n\r\nconst NotFound = () => <div className=\"Main\"><h1>Not found</h1></div>\r\n\r\nexport default NotFound;\r\n","function parseXml(xml) {\r\n   var dom = null;\r\n   if (window.DOMParser) {\r\n      try {\r\n         dom = (new DOMParser()).parseFromString(xml, \"text/xml\");\r\n      }\r\n      catch (e) { dom = null; }\r\n   }\r\n   else if (window.ActiveXObject) {\r\n      try {\r\n         dom = new window.ActiveXObject('Microsoft.XMLDOM');\r\n         dom.async = false;\r\n         if (!dom.loadXML(xml)) // parse error ..\r\n\r\n            window.alert(dom.parseError.reason + dom.parseError.srcText);\r\n      }\r\n      catch (e) { dom = null; }\r\n   }\r\n   else\r\n      alert(\"cannot parse xml string!\");\r\n   return dom;\r\n}\r\n\r\n/*\tThis work is licensed under Creative Commons GNU LGPL License.\r\n\r\n   License: http://creativecommons.org/licenses/LGPL/2.1/\r\n   Version: 0.9\r\n   Author:  Stefan Goessner/2006\r\n   Web:     http://goessner.net/ \r\n*/\r\nfunction xml2json(xml, tab) {\r\n   var X = {\r\n      toObj: function (xml) {\r\n         var o = {};\r\n         if (xml.nodeType === 1) {   // element node ..\r\n            if (xml.attributes.length)   // element with attributes  ..\r\n               for (var i = 0; i < xml.attributes.length; i++)\r\n                  o[\"@\" + xml.attributes[i].nodeName] = (xml.attributes[i].nodeValue || \"\").toString();\r\n            if (xml.firstChild) { // element has child nodes ..\r\n               var textChild = 0, cdataChild = 0, hasElementChild = false;\r\n               for (var n = xml.firstChild; n; n = n.nextSibling) {\r\n                  if (n.nodeType === 1) hasElementChild = true;\r\n                  else if (n.nodeType === 3 && n.nodeValue.match(/[^ \\f\\n\\r\\t\\v]/)) textChild++; // non-whitespace text\r\n                  else if (n.nodeType === 4) cdataChild++; // cdata section node\r\n               }\r\n               if (hasElementChild) {\r\n                  if (textChild < 2 && cdataChild < 2) { // structured element with evtl. a single text or/and cdata node ..\r\n                     X.removeWhite(xml);\r\n                     for (var nm = xml.firstChild; nm; nm = nm.nextSibling) {\r\n                        if (nm.nodeType === 3)  // text node\r\n                           o[\"#text\"] = X.escape(nm.nodeValue);\r\n                        else if (nm.nodeType === 4)  // cdata node\r\n                           o[\"#cdata\"] = X.escape(nm.nodeValue);\r\n                        else if (o[nm.nodeName]) {  // multiple occurence of element ..\r\n                           if (o[nm.nodeName] instanceof Array)\r\n                              o[nm.nodeName][o[nm.nodeName].length] = X.toObj(nm);\r\n                           else\r\n                              o[nm.nodeName] = [o[nm.nodeName], X.toObj(nm)];\r\n                        }\r\n                        else  // first occurence of element..\r\n                           o[nm.nodeName] = X.toObj(nm);\r\n                     }\r\n                  }\r\n                  else { // mixed content\r\n                     if (!xml.attributes.length)\r\n                        o = X.escape(X.innerXml(xml));\r\n                     else\r\n                        o[\"#text\"] = X.escape(X.innerXml(xml));\r\n                  }\r\n               }\r\n               else if (textChild) { // pure text\r\n                  if (!xml.attributes.length)\r\n                     o = X.escape(X.innerXml(xml));\r\n                  else\r\n                     o[\"#text\"] = X.escape(X.innerXml(xml));\r\n               }\r\n               else if (cdataChild) { // cdata\r\n                  if (cdataChild > 1)\r\n                     o = X.escape(X.innerXml(xml));\r\n                  else\r\n                     for (var na = xml.firstChild; na; na = na.nextSibling)\r\n                        o[\"#cdata\"] = X.escape(na.nodeValue);\r\n               }\r\n            }\r\n            if (!xml.attributes.length && !xml.firstChild) o = null;\r\n         }\r\n         else if (xml.nodeType === 9) { // document.node\r\n            o = X.toObj(xml.documentElement);\r\n         }\r\n         else\r\n            alert(\"unhandled node type: \" + xml.nodeType);\r\n         return o;\r\n      },\r\n      toJson: function (o, name, ind) {\r\n         var json = name ? (\"\\\"\" + name + \"\\\"\") : \"\";\r\n         if (o instanceof Array) {\r\n            for (var i = 0, n = o.length; i < n; i++)\r\n               o[i] = X.toJson(o[i], \"\", ind + \"\\t\");\r\n            json += (name ? \":[\" : \"[\") + (o.length > 1 ? (\"\\n\" + ind + \"\\t\" + o.join(\",\\n\" + ind + \"\\t\") + \"\\n\" + ind) : o.join(\"\")) + \"]\";\r\n         }\r\n         else if (o === null)\r\n            json += (name && \":\") + \"null\";\r\n         else if (typeof (o) === \"object\") {\r\n            var arr = [];\r\n            for (var m in o)\r\n               arr[arr.length] = X.toJson(o[m], m, ind + \"\\t\");\r\n            json += (name ? \":{\" : \"{\") + (arr.length > 1 ? (\"\\n\" + ind + \"\\t\" + arr.join(\",\\n\" + ind + \"\\t\") + \"\\n\" + ind) : arr.join(\"\")) + \"}\";\r\n         }\r\n         else if (typeof (o) === \"string\")\r\n            json += (name && \":\") + \"\\\"\" + o.toString().replace(/\"/g, \"\\\\\\\"\") + \"\\\"\";\r\n         else\r\n            json += (name && \":\") + o.toString();\r\n         return json;\r\n      },\r\n      innerXml: function (node) {\r\n         var s = \"\"\r\n         if (\"innerHTML\" in node)\r\n            s = node.innerHTML;\r\n         else {\r\n            var asXml = function (n) {\r\n               var s = \"\";\r\n               if (n.nodeType === 1) {\r\n                  s += \"<\" + n.nodeName;\r\n                  for (var i = 0; i < n.attributes.length; i++)\r\n                     s += \" \" + n.attributes[i].nodeName + \"=\\\"\" + (n.attributes[i].nodeValue || \"\").toString() + \"\\\"\";\r\n                  if (n.firstChild) {\r\n                     s += \">\";\r\n                     for (var c = n.firstChild; c; c = c.nextSibling)\r\n                        s += asXml(c);\r\n                     s += \"</\" + n.nodeName + \">\";\r\n                  }\r\n                  else\r\n                     s += \"/>\";\r\n               }\r\n               else if (n.nodeType === 3)\r\n                  s += n.nodeValue;\r\n               else if (n.nodeType === 4)\r\n                  s += \"<![CDATA[\" + n.nodeValue + \"]]>\";\r\n               return s;\r\n            };\r\n            for (var c = node.firstChild; c; c = c.nextSibling)\r\n               s += asXml(c);\r\n         }\r\n         return s;\r\n      },\r\n      escape: function (txt) {\r\n         return txt.replace(/[\\\\]/g, \"\\\\\\\\\")\r\n            .replace(/[\"]/g, '\"')\r\n            .replace(/[\\n]/g, '\\\\n')\r\n            .replace(/[\\r]/g, '\\\\r');\r\n      },\r\n      removeWhite: function (e) {\r\n         e.normalize();\r\n         for (var n = e.firstChild; n;) {\r\n            if (n.nodeType === 3) {  // text node\r\n               if (!n.nodeValue.match(/[^ \\f\\n\\r\\t\\v]/)) { // pure whitespace text node\r\n                  var nxt = n.nextSibling;\r\n                  e.removeChild(n);\r\n                  n = nxt;\r\n               }\r\n               else\r\n                  n = n.nextSibling;\r\n            }\r\n            else if (n.nodeType === 1) {  // element node\r\n               X.removeWhite(n);\r\n               n = n.nextSibling;\r\n            }\r\n            else                      // any other node\r\n               n = n.nextSibling;\r\n         }\r\n         return e;\r\n      }\r\n   };\r\n   if (xml.nodeType === 9) // document node\r\n      xml = xml.documentElement;\r\n   var json = X.toJson(X.toObj(X.removeWhite(xml)), xml.nodeName, \"\\t\");\r\n   return \"{\\n\" + tab + (tab ? json.replace(/\\t/g, tab) : json.replace(/\\t|\\n/g, \"\")) + \"\\n}\";\r\n}\r\n\r\nexport const convertXml2Json = (text) => {\r\n   var xml = parseXml(text);\r\n   var json = xml2json(xml, \"\");\r\n   return json;\r\n}\r\n\r\nexport default convertXml2Json;\r\n","var indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB || window.shimIndexedDB;\r\n\r\nexport const DB = \"BBG_DB\";\r\nexport const IMAGES = \"BGG_DB_IMAGES\"\r\nexport const DETAILS = \"BGG_DB_DETAILS\"\r\nexport const CACHE = \"BGG_DB_CACHE\"\r\n\r\nfunction connect(name, version = 4) {\r\n    return new Promise((resolve, reject) => {\r\n        const request = indexedDB.open(name, version);\r\n        request.onupgradeneeded = function (event) {\r\n            const db = event.target.result;\r\n            db.createObjectStore(IMAGES, { keyPath: \"id\" });\r\n            db.createObjectStore(DETAILS, { keyPath: \"id\" });\r\n            db.createObjectStore(CACHE, { keyPath: \"id\" });\r\n        };;\r\n        request.onsuccess = () => resolve(request.result);\r\n        request.onerror = () => reject(request.error);\r\n        request.onblocked = () => { console.log('blocked'); };\r\n    });\r\n}\r\n\r\nfunction add_to_db(conn, table, key, value) {\r\n    return new Promise((resolve, reject) => {\r\n        const tx = conn.transaction(table, \"readwrite\");\r\n        const store = tx.objectStore(table);\r\n        const request = store.put({ id: key, data: value });\r\n        request.onsuccess = () => resolve(request.result);\r\n        request.onerror = () => reject(request.error);\r\n    });\r\n}\r\n\r\nfunction get_from_db(conn, table, key) {\r\n    return new Promise((resolve, reject) => {\r\n        const tx = conn.transaction(table, \"readonly\");\r\n        const store = tx.objectStore(table);\r\n        const request = store.get(key);\r\n        request.onsuccess = () => resolve(request && request.result && request.result.data);\r\n        request.onerror = () => reject(request.error);\r\n    });\r\n}\r\n\r\nexport const add = async (table, key, data) => {\r\n    let conn;\r\n    try {\r\n        conn = await connect(DB);\r\n        await add_to_db(conn, table, key, data);\r\n    } catch (exception) {\r\n        console.error(exception);\r\n    } finally {\r\n        if (conn)\r\n            conn.close();\r\n    }\r\n}\r\n\r\nexport const get = async (table, key) => {\r\n    let conn;\r\n    try {\r\n        conn = await connect(DB);\r\n        return await get_from_db(conn, table, key);\r\n    } catch (exception) {\r\n        console.error(exception);\r\n    } finally {\r\n        if (conn)\r\n            conn.close();\r\n    }\r\n}\r\n\r\nexport default { IMAGES, DETAILS, CACHE, add, get };","import parseXml from './xml2json';\r\nimport db from '../utilities/db';\r\n\r\nvar bgg_config = {\r\n  cachePrefix: 'Cache_',\r\n  baseUrl: \"https://boardgamegeek.com/xmlapi2/\"\r\n};\r\n\r\nvar DELAY = 350;\r\n\r\nfunction sleep(ms) {\r\n  return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\nconst fetchUntil = (url, retries = 5, mult = 2.5) => {\r\n  return new Promise(async (resolve, reject) => {\r\n    for (var retryN = 0; retryN < retries; retryN++) {\r\n      try {\r\n        var result = await fetch(url);\r\n        if (result.status === 200) {\r\n          resolve(result);\r\n          return;\r\n        }\r\n        else {\r\n          DELAY += 25;\r\n          await sleep(DELAY * Math.pow(mult, retryN));\r\n          continue;\r\n        }\r\n      }\r\n      catch {\r\n        DELAY += 25;\r\n        await sleep(DELAY * Math.pow(mult, retryN));\r\n        continue;\r\n      }\r\n    }\r\n    reject();\r\n  });\r\n}\r\n\r\nconst bgg = async (path, queryParams) => {\r\n  let url = bgg_config.baseUrl + path;\r\n  if (queryParams) {\r\n    var qs = Object.entries(queryParams).map( ([key, value]) => key + \"=\" + value);\r\n    if (qs.length && url.indexOf('?') === -1) {\r\n      url = url + \"?\";\r\n    }\r\n\r\n    url = url + qs.join('&');\r\n  }\r\n\r\n  let cache = await db.get(db.CACHE, bgg_config.cachePrefix + url);\r\n  if (cache) {\r\n    return Promise.resolve({ \r\n      data: JSON.parse(cache),\r\n      cache: true\r\n    });\r\n  }\r\n\r\n  return fetchUntil(url)\r\n    .then(x => x.text())\r\n    .then(x => parseXml(x))\r\n    .then(x => {\r\n      var obj = JSON.parse(x);\r\n      db.add(db.CACHE, bgg_config.cachePrefix + url, x);\r\n      return { data: obj, cache: false };\r\n    });\r\n};\r\n\r\nexport default bgg;\r\n","import React, { useState, useEffect } from 'react';\r\nimport bgg from '../bgg';\r\nimport db from '../utilities/db'\r\n\r\nconst DELAY = 400;\r\n\r\nfunction toDataURL(src, outputFormat) {\r\n  var img = new Image();\r\n  return new Promise(resolve => {\r\n    img.crossOrigin = 'anonymous';\r\n    img.onload = function () {\r\n      var canvas = document.createElement('CANVAS');\r\n      var ctx = canvas.getContext('2d');\r\n      var dataURL;\r\n      canvas.height = this.naturalHeight;\r\n      canvas.width = this.naturalWidth;\r\n      ctx.drawImage(this, 0, 0);\r\n      dataURL = canvas.toDataURL(outputFormat);\r\n      resolve(dataURL);\r\n    };\r\n    img.src = src;\r\n    if (img.complete || img.complete === undefined) {\r\n      img.src = \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==\";\r\n      img.src = src;\r\n    }\r\n  });\r\n}\r\n\r\nconst GetBggDataWidget = ({ name, save, history }) => {\r\n  const [data, setData] = useState(null);\r\n  const [details, setDetails] = useState({});\r\n  const [images, setImages] = useState({});\r\n\r\n  useEffect(() => {\r\n    setData(null);\r\n    setDetails({});\r\n    setImages({});\r\n  }, [name]);\r\n\r\n  useEffect(() => {\r\n    if (data && Object.entries(details).length === 0) {\r\n      getDetails();\r\n    }\r\n  }, [data, details]);\r\n\r\n  /*\r\n    useEffect(() => {\r\n    let isMounted = true; // track whether component is mounted\r\n\r\n    request.get(url)\r\n      .then(result => {\r\n        if (isMounted) {\r\n          setState(result);\r\n        }\r\n      });\r\n\r\n    return () => {\r\n      // clean up\r\n      isMounted = false;\r\n    };\r\n    // Warning: Can't perform a React state update on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in a useEffect cleanup function.\r\n  }, []); // only on \"didMount\"\r\n  */\r\n\r\n  let saveToStorage = () => {\r\n    let games = data.items.item.map(x => {\r\n      return ({\r\n        ...x,\r\n        ...details[x[\"@objectid\"]].items.item\r\n      });\r\n    });\r\n    console.log(games);\r\n    save(games);\r\n    history.push('/filter/' + name);\r\n  };\r\n\r\n  let onClickFetch = () => {\r\n    bgg('collection', {\r\n      username: name,\r\n      subtype: \"boardgame\",\r\n      excludesubtype: \"boardgameexpansion\",\r\n      stats: 1,\r\n      own: 1\r\n    })\r\n      .then(function (x) {\r\n        setData(x.data);\r\n      });\r\n  };\r\n\r\n  let getNextDetails = (list) => {\r\n    let id = list[0];\r\n    if (!id) {\r\n      // if (details) saveToStorage();\r\n      return;\r\n    }\r\n\r\n    bgg('thing', {\r\n      id,\r\n      stats: 1\r\n    })\r\n      .then(function (results) {\r\n\r\n        setDetails(state => {\r\n          let newDetails = { ...state };\r\n          newDetails[id] = results.data;\r\n          return newDetails;\r\n        });\r\n\r\n        setTimeout(() => getNextDetails(list.slice(1)), results.cache ? 0 : DELAY);\r\n      });\r\n  }\r\n\r\n  let getNextImages = async (list) => {\r\n    let url = list[0];\r\n    if (!url) return;\r\n\r\n    var cached = await db.get(db.IMAGES, url);\r\n\r\n    if (cached) {\r\n      setImages(state => {\r\n        let newDetails = { ...state };\r\n        newDetails[url] = url;\r\n        return newDetails;\r\n      });\r\n      getNextImages(list.slice(1));\r\n    }\r\n    else {\r\n      toDataURL(url)\r\n        .then(function (src) {\r\n          db.add(db.IMAGES, url, src);\r\n\r\n          setImages(state => {\r\n            let newDetails = { ...state };\r\n            newDetails[url] = url;\r\n            return newDetails;\r\n          });\r\n\r\n          setTimeout(() => getNextImages(list.slice(1)), DELAY);\r\n        });\r\n    }\r\n  }\r\n\r\n  let getDetails = async () => {\r\n    let list = [...data.items.item].map(x => x['@objectid']);\r\n    getNextDetails(list);\r\n  };\r\n\r\n  let getImages = async () => {\r\n    let list = [...data.items.item].map(x => x['image']);\r\n    getNextImages(list);\r\n  };\r\n\r\n  if (!data) {\r\n    onClickFetch();\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      {details && data && (<pre>Loading data for games {Object.keys(details).length} of {data.items.item.length}</pre>)}\r\n\r\n      {data && details && <button onClick={saveToStorage}>Save</button>}\r\n    </div>\r\n  );\r\n  /*\r\n   <button onClick={onClickFetch}>Fetch</button> \r\n        {data && <button onClick={getDetails}>Get All Details</button>}\r\n        \r\n      {data && details && <button onClick={getImages}>Get All Images</button>}\r\n      {images && data && (<pre>Images {Object.keys(images).length} of {data.items.item.length}</pre>)}\r\n      {data && (<pre>{JSON.stringify(data, null, 4)}</pre>)}\r\n  */\r\n}\r\n\r\nexport default GetBggDataWidget;","import React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport NotFound from '../ErrorPages';\r\nimport GetBggDataWidget from './GetBggDataWidget';\r\n\r\nconst ViewUserComponent = ({ match, users, dispatch, history }) => {\r\n  let [id, setId] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    setId(match.params.id);\r\n  }, [match]);\r\n\r\n  var user = users[id];\r\n  if (!user) {\r\n    return <NotFound />\r\n  }\r\n\r\n  const delUser = () => {\r\n    dispatch({ type: \"DELETE_USER\", value: id });\r\n    history.replace('/collection/add');\r\n  }\r\n\r\n  return (\r\n    <>\r\n    <h1>{user.name}</h1>\r\n    <GetBggDataWidget history={history} save={(value) => dispatch({ type: \"SAVE\", user: id, value })} name={user.name} />\r\n    <div style={{ marginTop: \"30px\" }}><button onClick={delUser}>Remove user</button></div>\r\n    </>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  users: state.users\r\n});\r\n\r\nexport default connect(mapStateToProps)(ViewUserComponent);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { NavLink, Switch, Route } from 'react-router-dom'\r\nimport CW from './CounterWidget/CW';\r\nimport AddUserComponent from './AddUserComponent/AddUserComponent';\r\nimport ViewUserComponent from './ViewUserComponent/ViewUserComponent';\r\nimport NotFound from './ErrorPages';\r\n\r\nconst MainPage = ({ history }) => {\r\n  //if (Object.keys(users).length === 0) {\r\n    history.replace('/collection/add');\r\n  //}\r\n\r\n  return (<div className=\"Main\"><h1>Users</h1></div>);\r\n}\r\n\r\nconst UserList = ({ list }) => {\r\n  return (\r\n    <ul>\r\n      {Object.entries(list).map( ([key, value]) => (\r\n      <li key={key}>\r\n        <NavLink activeClassName='active' to={\"/collection/user/\" + value.name}>\r\n          <span className='title'>{value.name}</span>           \r\n        </NavLink>\r\n      </li>\r\n      ))}\r\n      \r\n      <li key=\"add\" style={{ borderTop: \"1px solid gray\" }}>\r\n      <NavLink activeClassName='active' to=\"/collection/add\">\r\n        <span className='title'>+ Add user</span>           \r\n      </NavLink>\r\n      </li>\r\n\r\n    </ul>\r\n  );\r\n}\r\n\r\nconst CollectionPage = ({ users }) => {\r\n  return (\r\n    <>\r\n    <div className='SideBar'>\r\n      <UserList list={users} />\r\n    </div>\r\n    <div className=\"Main\">\r\n      <Switch>\r\n        <Route path=\"/collection/add\" component={AddUserComponent} />\r\n        <Route path=\"/collection/user/:id\" component={ViewUserComponent} />\r\n        <Route path=\"/collection/cw\" component={CW} />\r\n        <Route path=\"/collection\" component={MainPage} />\r\n        <Route component={NotFound} />\r\n      </Switch>\r\n    </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default connect(state => ({\r\n  users: state.users,\r\n}))(CollectionPage);\r\n","const initialState = {\r\n    stateVersion: 0,\r\n    count: 0,\r\n    users: {},\r\n    active: [],\r\n    collection: [],\r\n    details: {},\r\n};\r\n\r\nexport default initialState;","import initialState from './state';\r\nimport db from '../modules/utilities/db'\r\n\r\nconst reducer = (state, action) => {\r\n    switch(action.type) {\r\n      case 'INCREMENT':\r\n        return {\r\n          ...state,\r\n          count: state.count + 1\r\n        };\r\n                              \r\n        case 'RESET':\r\n          localStorage.clear();\r\n          indexedDB.deleteDatabase(db.DB);\r\n          return initialState;\r\n\r\n        case 'ADDUSER':\r\n          let newState = {...state, count: state.count + 1, users: { ...state.users } };\r\n          newState.users[action.value] = newState.users[action.value] || { name: action.value, id: newState.count };\r\n          return newState;\r\n\r\n        case \"DELETE_USER\":\r\n          let delState = {...state, users: { ...state.users } };\r\n          delete delState.users[action.value];\r\n          return delState;\r\n\r\n        case \"SET_ACTIVE\":\r\n          return { ...state, active: action.value };\r\n\r\n        case \"SET_COLLECTION\":\r\n          return { ...state, collection: action.value };\r\n\r\n        case \"SET_SORT\":\r\n          return { ...state, sort: action.value };\r\n\r\n        case \"SAVE\":\r\n          let key = \"COLLECTION_\" + action.user;\r\n          db.add(db.DETAILS, key, action.value);\r\n          let sstate = { ...state };\r\n          sstate.details[action.user] = key;\r\n          return sstate;\r\n          \r\n      default:\r\n        return state;\r\n    }\r\n  }\r\n  \r\n  export { reducer };","import React from 'react';\r\nimport { reducer as reduceState } from './reducer';\r\nimport initialState from './state';\r\nimport { createStore } from 'redux';\r\n\r\nconst LOCALSTORAGEKEY = \"BGG-COLLECTION\";\r\n\r\nconst getInitialState = () => {\r\n  var data = localStorage.getItem(LOCALSTORAGEKEY);\r\n  if (data) {\r\n    try {\r\n      return {\r\n        ...initialState,\r\n        ...JSON.parse(data)\r\n      };\r\n    } catch {}\r\n  }\r\n\r\n  return initialState;\r\n} \r\n\r\nexport const reducer = (state = getInitialState(), action) => {\r\n  const newState = reduceState(state, action);\r\n  localStorage.setItem(LOCALSTORAGEKEY, JSON.stringify(newState));\r\n  return newState;\r\n}\r\n\r\nexport const context = React.createContext(null);\r\n\r\nexport const store = createStore(reducer);\r\n\r\nexport default { store, reducer, context };\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nconst HomeComponent = (props) => {\r\n  if (Object.keys(props.users).length === 0) {\r\n    props.history.replace('/collection');\r\n  }\r\n\r\n  if (Object.keys(props.users).length > 0) {\r\n    props.history.replace('/filter');\r\n  }\r\n\r\n  return (\r\n    <>\r\n    <div className=\"Main\">\r\n      <h1>Home</h1>\r\n    </div>\r\n    </>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  users: state.users\r\n});\r\n\r\nexport default connect(mapStateToProps)(HomeComponent);\r\n","import React from 'react';\r\n\r\nexport const AllFilters = {\r\n  \"length\": {\r\n    title: \"Game length\",\r\n    options: [\r\n      { value: 'short', name: 'Short', action: (list) => list.filter(x => x.playtime < 60) },\r\n      { value: 'medium', name: 'Medium', action: (list) => list.filter(x => x.playtime > 45 && x.playtime < 120) },\r\n      { value: 'long', name: 'Long', action: (list) => list.filter(x => x.playtime > 100) },\r\n    ]\r\n  },\r\n  \"players\": {\r\n    title: \"Players\",\r\n    options: [\r\n      { value: '1', action: (list) => list.filter(x => x.minplayers <= 1 && x.maxplayers >= 1) },\r\n      { value: '2', action: (list) => list.filter(x => x.minplayers <= 2 && x.maxplayers >= 2) },\r\n      { value: '3', action: (list) => list.filter(x => x.minplayers <= 3 && x.maxplayers >= 3) },\r\n      { value: '4', action: (list) => list.filter(x => x.minplayers <= 4 && x.maxplayers >= 4) },\r\n      { value: '5', action: (list) => list.filter(x => x.minplayers <= 5 && x.maxplayers >= 5) },\r\n      { value: '6', action: (list) => list.filter(x => x.minplayers <= 6 && x.maxplayers >= 6) },\r\n      { value: '7+', action: (list) => list.filter(x => x.maxplayers >= 7) },\r\n    ]\r\n  },\r\n  \"weight\": {\r\n    title: \"Game weight\",\r\n    options: [\r\n      { value: 'light', name: 'Light', action: (list) => list.filter(x => x.weight <= 2) },\r\n      { value: 'medlight', name: 'Medium Light', action: (list) => list.filter(x => x.weight >= 1.5 && x.weight <= 2.5) },\r\n      { value: 'med', name: 'Medium', action: (list) => list.filter(x => x.weight >= 2 && x.weight <= 3.5) },\r\n      { value: 'medheavy', name: 'Medium Heavy', action: (list) => list.filter(x => x.weight >= 3 && x.weight <= 4.5) },\r\n      { value: 'heavy', name: 'Heavy', action: (list) => list.filter(x => x.weight >= 4) },\r\n    ]\r\n  },\r\n  \"year\": {\r\n    title: \"Year published\",\r\n    options: [\r\n      { value: '2022', action: (list) => list.filter(x => x.year >= 2022 && x.year <= 2022) },\r\n      { value: '2021', action: (list) => list.filter(x => x.year >= 2021 && x.year <= 2021) },\r\n      { value: '2020', action: (list) => list.filter(x => x.year >= 2020 && x.year <= 2020) },\r\n      { value: '2015-2019', action: (list) => list.filter(x => x.year >= 2015 && x.year <= 2019) },\r\n      { value: '2010-2015', action: (list) => list.filter(x => x.year >= 2010 && x.year <= 2015) },\r\n      { value: '2000-2009', action: (list) => list.filter(x => x.year >= 2000 && x.year <= 2009) },\r\n      { value: '1990-1999', action: (list) => list.filter(x => x.year >= 1990 && x.year <= 1999) },\r\n      { value: '0000-1990', action: (list) => list.filter(x => x.year <= 1990) },\r\n    ]\r\n  },\r\n  \"played\": {\r\n    title: \"Played\",\r\n    options: [\r\n      { value: 'Rated', action: (list) => list.filter(x => x.rating >= 1) },\r\n      { value: 'Has plays', action: (list) => list.filter(x => x.plays > 0) },\r\n    ]\r\n  },\r\n  \"popularity\": {\r\n    title: \"Popularity\",\r\n    options: [\r\n      { value: 'High', action: (list) => list.filter(x => x.numowned >= 75000) },\r\n      { value: 'Medium', action: (list) => list.filter(x => x.numowned >= 35000 && x.numowned < 75000) },\r\n      { value: 'Low', action: (list) => list.filter(x => x.numowned > 10000 && x.numowned < 35000) },\r\n      { value: 'Very Low', action: (list) => list.filter(x => x.numowned < 10000) },\r\n    ]\r\n  },\r\n  \"best\": {\r\n    title: \"Best at\",\r\n    options: [\r\n      { value: '1', action: (list) => list.filter(x => x.suggestedPlayers.best.indexOf(\"1\") > -1) },\r\n      { value: '2', action: (list) => list.filter(x => x.suggestedPlayers.best.indexOf(\"2\") > -1) },\r\n      { value: '3', action: (list) => list.filter(x => x.suggestedPlayers.best.indexOf(\"3\") > -1) },\r\n      { value: '4', action: (list) => list.filter(x => x.suggestedPlayers.best.indexOf(\"4\") > -1) },\r\n      { value: '5', action: (list) => list.filter(x => x.suggestedPlayers.best.indexOf(\"5\") > -1) },\r\n      { value: '6', action: (list) => list.filter(x => x.suggestedPlayers.best.indexOf(\"6\") > -1) },\r\n      { value: '7+', action: (list) => list.filter(x => x.suggestedPlayers.best.indexOf(\"7\") > -1) },\r\n    ]\r\n  },\r\n  \"rec\": {\r\n    title: \"Recommended at\",\r\n    options: [\r\n      { value: '1', action: (list) => list.filter(x => x.suggestedPlayers.recommended.indexOf(\"1\") > -1) },\r\n      { value: '2', action: (list) => list.filter(x => x.suggestedPlayers.recommended.indexOf(\"2\") > -1) },\r\n      { value: '3', action: (list) => list.filter(x => x.suggestedPlayers.recommended.indexOf(\"3\") > -1) },\r\n      { value: '4', action: (list) => list.filter(x => x.suggestedPlayers.recommended.indexOf(\"4\") > -1) },\r\n      { value: '5', action: (list) => list.filter(x => x.suggestedPlayers.recommended.indexOf(\"5\") > -1) },\r\n      { value: '6', action: (list) => list.filter(x => x.suggestedPlayers.recommended.indexOf(\"6\") > -1) },\r\n      { value: '7+', action: (list) => list.filter(x => x.suggestedPlayers.recommended.indexOf(\"7\") > -1) },\r\n    ]\r\n  },\r\n  \"avoid\": {\r\n    title: \"Avoid at\",\r\n    options: [\r\n      { value: '1', action: (list) => list.filter(x => x.suggestedPlayers.avoid.indexOf(\"1\") > -1) },\r\n      { value: '2', action: (list) => list.filter(x => x.suggestedPlayers.avoid.indexOf(\"2\") > -1) },\r\n      { value: '3', action: (list) => list.filter(x => x.suggestedPlayers.avoid.indexOf(\"3\") > -1) },\r\n      { value: '4', action: (list) => list.filter(x => x.suggestedPlayers.avoid.indexOf(\"4\") > -1) },\r\n      { value: '5', action: (list) => list.filter(x => x.suggestedPlayers.avoid.indexOf(\"5\") > -1) },\r\n      { value: '6', action: (list) => list.filter(x => x.suggestedPlayers.avoid.indexOf(\"6\") > -1) },\r\n      { value: '7+', action: (list) => list.filter(x => x.suggestedPlayers.avoid.indexOf(\"7\") > -1) },\r\n    ]\r\n  },\r\n  \"type\": {\r\n    title: \"Game Type\",\r\n    options: [\r\n      { value: 'party', name: 'Party Game', action: (list) => list.filter(x => x.group.indexOf(\"Party Game\") > -1) },\r\n      { value: 'Miniatures', name: 'Miniatures', action: (list) => list.filter(x => x.group.indexOf(\"Miniatures\") > -1) },\r\n      { value: 'Real-time', name: 'Real-time', action: (list) => list.filter(x => x.group.indexOf(\"Real-time\") > -1) },\r\n      { value: 'Educational', name: 'Educational', action: (list) => list.filter(x => x.group.indexOf(\"Educational\") > -1) },\r\n      { value: 'child', name: \"Children's Game\", action: (list) => list.filter(x => x.group.indexOf(\"Children's Game\") > -1) },\r\n      { value: 'Wargame', name: 'Wargame', action: (list) => list.filter(x => x.group.indexOf(\"Wargame\") > -1) },\r\n      { value: 'Dice', name: 'Dice', action: (list) => list.filter(x => x.group.indexOf(\"Dice\") > -1) },\r\n    ]\r\n  },\r\n  \"category\": {\r\n    title: \"Game Category\",\r\n    options: [\r\n      { value: 'bluff', name: 'Bluffing', action: (list) => list.filter(x => x.group.indexOf(\"Bluffing\") > -1) },\r\n      { value: 'neg', name: 'Negotiation', action: (list) => list.filter(x => x.group.indexOf(\"Negotiation\") > -1) },\r\n      { value: 'Dexterity', name: 'Dexterity', action: (list) => list.filter(x => x.group.join(',').includes(\"Dexterity\")) },\r\n      { value: 'Deduction', name: 'Deduction', action: (list) => list.filter(x => x.group.indexOf(\"Deduction\") > -1) },\r\n      { value: 'Memory', name: 'Memory', action: (list) => list.filter(x => x.group.indexOf(\"Memory\") > -1) },\r\n      { value: 'Political', name: 'Political', action: (list) => list.filter(x => x.group.indexOf(\"Political\") > -1) },\r\n      { value: 'Role Playing', name: 'Role Playing', action: (list) => list.filter(x => x.group.indexOf(\"Role Playing\") > -1) },\r\n      { value: 'Real-Time', name: 'Real-Time', action: (list) => list.filter(x => x.group.indexOf(\"Real-Time\") > -1) },\r\n    ]\r\n  },\r\n  \"team\": {\r\n    title: \"Player interaction\",\r\n    options: [\r\n      { value: 'team', name: 'Team-Based', action: (list) => list.filter(x => x.group.indexOf(\"Team-Based Game\") > -1) },\r\n      { value: 'traitor', name: 'Traitor', action: (list) => list.filter(x => x.group.indexOf(\"Traitor Game\") > -1) },\r\n      { value: 'hidden', name: 'Hidden Roles', action: (list) => list.filter(x => x.group.indexOf(\"Hidden Roles\") > -1) },\r\n      { value: 'Negotiation', name: 'Negotiation', action: (list) => list.filter(x => x.group.indexOf(\"Negotiation\") > -1) },\r\n      { value: 'Trading', name: 'Trading', action: (list) => list.filter(x => x.group.indexOf(\"Trading\") > -1) },\r\n      { value: 'Player Elimination', name: 'Player Elimination', action: (list) => list.filter(x => x.group.indexOf(\"Player Elimination\") > -1) },\r\n      { value: 'Cooperative Game', name: 'Cooperative', action: (list) => list.filter(x => x.group.indexOf(\"Cooperative Game\") > -1) },\r\n    ]\r\n  },\r\n  \"mechanic\": {\r\n    title: \"Game Mechanic\",\r\n    options: [\r\n      { value: 'Auction', name: 'Auction', action: (list) => list.filter(x => x.group.join(',').includes(\"Auction\")) },\r\n      { value: 'Victory Points', name: 'Victory Points', action: (list) => list.filter(x => x.group.join(',').includes(\"Victory Points\")) },\r\n      { value: 'Drafting', name: 'Drafting', action: (list) => list.filter(x => x.group.join(',').includes(\"Drafting\")) },\r\n      { value: 'Worker Placement', name: 'Worker Placement', action: (list) => list.filter(x => x.group.join(',').includes(\"Worker Placement\")) },\r\n      { value: 'Area Majority', name: 'Area Majority', action: (list) => list.filter(x => x.group.join(',').includes(\"Area Majority\")) },\r\n      { value: 'Pick-up and Deliver', name: 'Pick-up and Deliver', action: (list) => list.filter(x => x.group.indexOf(\"Pick-up and Deliver\") > -1) },\r\n      { value: 'Dice Rolling', name: 'Dice Rolling', action: (list) => list.filter(x => x.group.indexOf(\"Dice Rolling\") > -1) },\r\n      { value: 'Push Your Luck', name: 'Push Your Luck', action: (list) => list.filter(x => x.group.indexOf(\"Push Your Luck\") > -1) },\r\n      { value: 'Tile Placement', name: 'Tile Placement', action: (list) => list.filter(x => x.group.indexOf(\"Tile Placement\") > -1) },\r\n      { value: 'take', name: 'Take-that', action: (list) => list.filter(x => x.group.indexOf(\"Take That\") > -1) },\r\n      { value: 'deckbuild', name: 'Deck, Bag, and Pool Building', action: (list) => list.filter(x => x.group.join(',').includes(\" Building\")) },\r\n    ]\r\n  },\r\n  \"setup\": {\r\n    title: \"Game Setup\",\r\n    options: [\r\n      { value: 'Simultaneous', name: 'Sixmultaneous Action Selection', action: (list) => list.filter(x => x.group.indexOf(\"Simultaneous Action Selection\") > -1) },\r\n      { value: 'Deck Construction', name: 'Deck Construction', action: (list) => list.filter(x => x.group.indexOf(\"Deck Construction\") > -1) },\r\n      { value: 'Variable Player Powers', name: 'Variable Player Powers', action: (list) => list.filter(x => x.group.indexOf(\"Variable Player Powers\") > -1) },\r\n      { value: 'Legacy Game', name: 'Legacy Game', action: (list) => list.filter(x => x.group.indexOf(\"Legacy Game\") > -1) },\r\n      { value: 'Campaign Game', name: 'Campaign/Scenario Game', action: (list) => list.filter(x => x.group.join(',').includes(\"Campaign\")) },\r\n    ]\r\n  },\r\n  \"lang\": {\r\n    title: \"Langauge Dependency\",\r\n    options: [\r\n      { value: \"1\", name: 'No necessary in-game text', action: (list) => list.filter(x => x.language <= 2) },\r\n      { value: \"2\", name: 'Some necessary text - easily memorized or small crib sheet', action: (list) => list.filter(x => x.language > 1.75 && x.language < 2.75) },\r\n      { value: \"3\", name: 'Moderate in-game text - needs crib sheet or paste ups', action: (list) => list.filter(x => x.language > 2.5 && x.language < 3.75) },\r\n      { value: \"4\", name: 'Extensive use of text - massive conversion needed to be playable', action: (list) => list.filter(x => x.language > 3.5 && x.language < 4.33) },\r\n      { value: \"5\", name: 'Unplayable in another language', action: (list) => list.filter(x => x.language >= 4) },\r\n    ]\r\n  },\r\n};\r\n\r\nconst toggle_filter = (key, value, filters, change) => {\r\n  let newFilter = { ...filters };\r\n\r\n  if (isActiveFilter(newFilter, key, value)) {\r\n    var v = value.replace(/^-/g, '');\r\n    let prev = newFilter[key].find(x => x === v || x === \"-\"+v);\r\n    newFilter[key] = newFilter[key].filter(x => x !== prev);\r\n    if (prev !== value) newFilter[key].push(value);\r\n    if (newFilter[key].length === 0) {\r\n      delete newFilter[key];\r\n    }\r\n  }\r\n  else {\r\n    if (!newFilter[key]) newFilter[key] = [];\r\n    newFilter[key].push(value);\r\n  }\r\n\r\n  let queryString = Object.entries(newFilter).map(x => x[0] + \"=\" + encodeURIComponent(x[1].join(','))).join('&');\r\n  change(queryString);\r\n};\r\n\r\nexport const applyFilters = (collection, filters) => {\r\n  let list = [...collection];\r\n  for (const [key, values] of Object.entries(filters)) {\r\n    let group = AllFilters[key];\r\n\r\n    let remValues = values.filter(x => x.startsWith(\"-\")).map(x => x.replace('-',''));\r\n    let removeActiveFilters = group.options.filter(x => x.value && remValues.indexOf(x.value) > -1);\r\n    if (removeActiveFilters.length) {\r\n      let remaining = new Set(list);\r\n      for (let f of removeActiveFilters) {\r\n        let toRemove = f.action(list);\r\n        for (let val of toRemove) remaining.delete(val);\r\n      }\r\n      list = Array.from(remaining.values());\r\n    }\r\n\r\n    let union = new Set();\r\n    let activeFilters = group.options.filter(x => values.indexOf(x.value) > -1);\r\n    if (activeFilters.length) {\r\n      for (let f of activeFilters) {\r\n        let filtered = f.action(list);\r\n        for (let val of filtered) union.add(val);\r\n      }\r\n      list = Array.from(union.values());\r\n    }\r\n  }\r\n  return list;\r\n};\r\n\r\nexport const isActiveFilter = (filters, key, value) => {\r\n  if (!filters[key]) return false;\r\n  var v = value.replace(/^-/g, '');\r\n  if (filters[key].indexOf(v) > -1) return \"+\";\r\n  if (filters[key].indexOf(\"-\" + v) > -1) return \"-\";\r\n  return false;\r\n};\r\n\r\nconst rightClick = (event, key, value, filters, change) => {\r\n  event.preventDefault();\r\n  event.stopPropagation();\r\n  toggle_filter(key, value, filters, change);\r\n  return false;\r\n};\r\n\r\nexport const FilterCollectionWidget = ({ filters, change }) => {\r\n  return (\r\n    <div className='filterlists'>\r\n      {Object.entries(AllFilters).map(f =>\r\n        <div className='card' key={f[0]}>\r\n          <h3>{f[1].title}</h3>\r\n          <ul>\r\n            {f[1].options.map(o =>\r\n              <li key={o.value}><button\r\n                onContextMenu={(event) => rightClick(event, f[0], \"-\" + o.value, filters, change)}\r\n                onClick={() => toggle_filter(f[0], o.value, filters, change)}\r\n                className={ (isActiveFilter(filters, f[0], o.value) === \"+\" ? \"selected\" : null) + \" \" + (isActiveFilter(filters, f[0], \"-\"+o.value) === \"-\" ? \"disselected\" : null)}\r\n               >{o.name || o.value}</button></li>\r\n            )}\r\n          </ul>\r\n        </div>\r\n      )}\r\n    </div>);\r\n};\r\n","import db from '../utilities/db';\r\n\r\nexport const CreateCollectionFromUserDetails = async (dbKeys, save) => {\r\n  var all = {};\r\n  for (let key of dbKeys) {\r\n    var games = await db.get(db.DETAILS, key);\r\n    for (let g of games) {\r\n      all[g['@id']] = g;\r\n    }\r\n  }\r\n  let allGames = Object.values(all);\r\n  console.log(allGames[0]);\r\n  allGames = allGames.map(x => CreateGameDataFromBggData(x));\r\n  save(allGames);\r\n}\r\n\r\nexport const CreateGameDataFromBggData = (data) => {\r\n  let id = data['@id'];\r\n\r\n  let name = data.name;\r\n  if (Array.isArray(name)) {\r\n    let filtered = name.filter(n => n[\"@type\"] === \"primary\")[0];\r\n    name = filtered || name[0];\r\n  }\r\n  name = name[\"@value\"];\r\n\r\n  let image = data.thumbnail;\r\n  let year = parseInt(data.yearpublished[\"@value\"], 10);\r\n  let rating = parseFloat(data.stats.rating[\"@value\"])\r\n  let playtime = parseInt(data.playingtime[\"@value\"], 10);\r\n  let minage = parseInt(data.minage[\"@value\"], 10);\r\n  let minplayers = parseInt(data.minplayers[\"@value\"], 10);\r\n  let maxplayers = parseInt(data.maxplayers[\"@value\"], 10);\r\n  let maxplaytime = parseInt(data.maxplaytime[\"@value\"], 10);\r\n  let minplaytime = parseInt(data.minplaytime[\"@value\"], 10);\r\n  let numowned = parseInt(data.stats[\"@numowned\"], 10);\r\n  let plays = parseInt(data.numplays, 10);\r\n  if (!Array.isArray(data.stats.rating.ranks.rank)) {\r\n    data.stats.rating.ranks.rank = [data.stats.rating.ranks.rank];\r\n  }\r\n\r\n  let rank = data.stats.rating.ranks.rank.filter(x => x[\"@id\"] === \"1\")[0];\r\n  let bggrating = null;\r\n  if (rank) {\r\n    bggrating = parseFloat(rank[\"@bayesaverage\"]);\r\n    rank = parseFloat(rank[\"@value\"]) || null;\r\n  }\r\n\r\n  let suggestedPlayers = { best: [], recommended: [], avoid: [] };\r\n  let suggested = data.poll.filter(x => x[\"@name\"] === \"suggested_numplayers\")[0];\r\n  if (suggested) {\r\n    if (!Array.isArray(suggested.results)) suggested.results = [suggested.results];\r\n    for (var item of suggested.results) {\r\n      let num = item[\"@numplayers\"];\r\n      let votes_best = parseInt(item.result.filter(x => x[\"@value\"] === \"Best\")[0][\"@numvotes\"], 10);\r\n      let votes_recommended = parseInt(item.result.filter(x => x[\"@value\"] === \"Recommended\")[0][\"@numvotes\"], 10);\r\n      let votes_avoid = parseInt(item.result.filter(x => x[\"@value\"] === \"Not Recommended\")[0][\"@numvotes\"], 10);\r\n\r\n      if (votes_avoid > votes_best + votes_recommended) {\r\n        if (num.indexOf('+') === -1)\r\n          suggestedPlayers.avoid.push(num);\r\n      }\r\n      else if (votes_best > votes_recommended) suggestedPlayers.best.push(num);\r\n      else suggestedPlayers.recommended.push(num);\r\n    }\r\n  }\r\n\r\n  let language = null;\r\n  let langPoll = data.poll.find(x => x[\"@name\"] === \"language_dependence\");\r\n  if (langPoll) {\r\n    let l1 = parseInt(langPoll.results.result.find(x => x[\"@value\"] === \"No necessary in-game text\")[\"@numvotes\"], 10);\r\n    let l2 = parseInt(langPoll.results.result.find(x => x[\"@value\"] === \"Some necessary text - easily memorized or small crib sheet\")[\"@numvotes\"], 10);\r\n    let l3 = parseInt(langPoll.results.result.find(x => x[\"@value\"] === \"Moderate in-game text - needs crib sheet or paste ups\")[\"@numvotes\"], 10);\r\n    let l4 = parseInt(langPoll.results.result.find(x => x[\"@value\"] === \"Extensive use of text - massive conversion needed to be playable\")[\"@numvotes\"], 10);\r\n    let l5 = parseInt(langPoll.results.result.find(x => x[\"@value\"] === \"Unplayable in another language\")[\"@numvotes\"], 10);\r\n    language = (l1 + l2*2 + l3*3 + l4*4 + l5*5) / (l1+l2+l3+l4+l5);\r\n  }\r\n\r\n  let group = data.link.filter(x => x[\"@type\"] === \"boardgamecategory\" || x[\"@type\"] === \"boardgamemechanic\").map(x => x[\"@value\"]);\r\n\r\n  let weight = parseFloat(data.statistics.ratings.averageweight[\"@value\"]);\r\n  let ratings = parseFloat(data.statistics.ratings.usersrated[\"@value\"]);\r\n\r\n  let gamedata = {\r\n    id, name, year, rating, playtime, minage, minplayers, maxplayers, maxplaytime, minplaytime, rank, bggrating, suggestedPlayers, image, numowned,\r\n    group,\r\n    weight,\r\n    ratings,\r\n    plays,\r\n    language\r\n  };\r\n  return gamedata;\r\n};\r\n","import React from 'react';\r\n\r\nexport const GameDataCard = ({ data }) => {\r\n  // let imgData = data.image && await db.get(db.IMAGES, data.image);\r\n\r\n  return (<div className='gamecard'>\r\n    {data.image && <div className='thumbnail'><img src={data.image} alt=\"Thumbnail for game\" style={{ maxWidth: \"100%\", maxHeight: \"200px\" }} /></div>}\r\n    <div className='heading'>\r\n      <span className='rank'>#{data.rank}</span> <span className='title'>{data.name}</span> <span className='year'>({data.year})</span>\r\n    </div>\r\n    <div className='details'>\r\n      <span className='rating'>Rating {data.bggrating}</span> <br />\r\n      <span className='playtime'>{data.playtime} min</span> <br />\r\n      <span className='weight'>Weight {data.weight}</span> <br />\r\n      <span className='players'>\r\n        Players {data.minplayers} to {data.maxplayers}<br />\r\n        Best at {data.suggestedPlayers.best.join(',')} <br />\r\n        Recommended at {data.suggestedPlayers.recommended.join(',')}\r\n      </span>\r\n    </div>\r\n  </div>)\r\n};\r\n\r\nexport default GameDataCard;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { FilterCollectionWidget, applyFilters } from './FilterCollectionWidget';\r\nimport { CreateCollectionFromUserDetails } from './CreateGameDataUtility';\r\nimport { GameDataCard } from './GameDataCard';\r\n\r\nconst AddUsersComponent = ({ activeClass, action, name }) => {\r\n  return (<><button className={activeClass} onClick={action}>{name}</button></>);\r\n}\r\n\r\nconst GamesComponent = ({ list, sort }) => {\r\n  if (!list) return (<></>);\r\n  console.log(sort);\r\n  sort = sort || \"rank,asc\";\r\n  let sortBy = sort.split(',')[0];\r\n  let desc = sort.split(',')[1] === \"desc\";\r\n  let up = desc ? -1 : 1\r\n  let down = desc ? 1 : -1\r\n  if (sortBy === \"rank\")  list.sort((a, b) => a.rank > b.rank ? up : down);\r\n  if (sortBy === \"rating\")  list.sort((a, b) => a.rating > b.rating ? up : down);\r\n  if (sortBy === \"numowned\")  list.sort((a, b) => a.numowned > b.numowned ? up : down);\r\n  \r\n  if (sortBy === \"playtime\")  list.sort((a, b) => a.playtime > b.playtime ? up : down);\r\n  if (sortBy === \"weight\")  list.sort((a, b) => a.weight > b.weight ? up : down);\r\n  if (sortBy === \"year\")  list.sort((a, b) => a.year > b.year ? up : down);\r\n  if (sortBy === \"name\")  list.sort((a, b) => a.name > b.name ? up : down);\r\n\r\n  return (<ul>{list.map(x => (<li key={x.id}>{<GameDataCard data={x} />}</li>))}</ul>);\r\n};\r\n\r\nconst FilterCollectionComponent = ({ users, active, history, dispatch, location, match, details, collection, sort }) => {\r\n  if (Object.keys(users).length === 0) {\r\n    history.replace('/collection');\r\n  }\r\n\r\n  var filterList = (location.search && location.search.replace('?', '').split('&').map(x => x.split('=')).map(x => ({ key: x[0], value: decodeURIComponent(x[1]).split(',') }))) || [];\r\n  // eslint-disable-next-line\r\n  var filters = filterList.reduce((a, b) => (a[b.key] = b.value, a), {});\r\n\r\n  var selectedUsers = (match.params.users && match.params.users.split(',')) || [];\r\n\r\n  if (selectedUsers.length === 0 && active.length > 0) {\r\n    history.replace('/filter/' + active.join(','));\r\n    return <></>;\r\n  }\r\n\r\n  let activeStateDetails = Object.entries(details).map(x => ({ user: x[0], active: selectedUsers.indexOf(x[0]) > -1, dbKey: x[1] }));\r\n\r\n  if (selectedUsers.length && match.params.users !== active.join(',')) {\r\n    dispatch({ type: \"SET_ACTIVE\", value: selectedUsers });\r\n    CreateCollectionFromUserDetails(activeStateDetails.filter(x => x.active).map(x => x.dbKey), x => dispatch({ type: \"SET_COLLECTION\", value: x }));\r\n  }\r\n\r\n  const add_active = (user) => {\r\n    let x = [...active, user];\r\n    history.replace('/filter/' + x.join(',') + location.search);\r\n  }\r\n\r\n  const rem_active = (user) => {\r\n    let x = active.filter(x => x !== user);\r\n    history.replace('/filter/' + x.join(',') + location.search);\r\n  }\r\n\r\n  let filteredCollection = applyFilters(collection, filters);\r\n\r\n  console.log(filteredCollection[0]);\r\n  return (\r\n    <div className=\"Main\">\r\n      <h2>Change Collection</h2>\r\n      <div className=\"userlist\">\r\n        {activeStateDetails.map(x => (<AddUsersComponent activeClass={x.active ? \"active\" : null} key={x.user} action={() => x.active ? rem_active(x.user) : add_active(x.user)} name={x.user} />))}\r\n      </div>\r\n      <h2>Add Filter</h2>\r\n      <FilterCollectionWidget filters={filters} change={(q) => history.push(location.pathname + '?' + q)} />\r\n      <div className=\"gamelist\">\r\n        <h2>Games</h2>\r\n        <div className='sortbar'>Sorty by <select value={sort} onChange={(e) => dispatch({ type: \"SET_SORT\", value: e.target.value})}>\r\n                  <option value=\"rank,asc\">Ranking</option>\r\n                  <option value=\"rating,desc\">Own Rating</option>\r\n                  <option value=\"numowned,desc\">Popularity</option>\r\n                  <option value=\"playtime,asc\">Play time</option>\r\n                  <option value=\"weight,asc\">Weight</option>\r\n                  <option value=\"year,desc\">Release year</option>\r\n                  <option value=\"name,asc\">Name</option>\r\n               </select></div>\r\n        <GamesComponent list={filteredCollection} sort={sort}  />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  users: state.users,\r\n  active: state.active,\r\n  details: state.details,\r\n  collection: state.collection,\r\n  sort: state.sort,\r\n});\r\n\r\nexport default connect(mapStateToProps)(FilterCollectionComponent);\r\n","import React from 'react';\r\nimport './App.css';\r\nimport Configuration from '../modules/Configuration';\r\nimport CollectionPage from '../modules/Collection';\r\nimport NotFound from '../modules/ErrorPages';\r\n\r\nimport { Provider } from 'react-redux'\r\nimport { Route, HashRouter as Router, Switch, NavLink  } from 'react-router-dom'\r\nimport { store } from '../store';\r\nimport HomeComponent from '../modules/HomeComponent'\r\nimport FilterCollectionComponent from '../modules/FilterCollectionComponent/FilterCollectionComponent'\r\n\r\nfunction App() {\r\n  return (\r\n    <Provider store={store}>\r\n      <Router>\r\n        <nav className='sm-flex'>\r\n          <NavLink exact activeClassName='active' to=\"/\">Home</NavLink>\r\n          <NavLink activeClassName='active' to=\"/collection/\">Collection</NavLink>\r\n          <NavLink activeClassName='active' to=\"/config\">Configuration</NavLink>\r\n        </nav>\r\n        <div className=\"Body\">\r\n          <Switch>\r\n            <Route exact path=\"/\" component={HomeComponent} />\r\n            <Route path=\"/collection\" component={CollectionPage} />\r\n            <Route path=\"/config\" component={Configuration} />\r\n            <Route path=\"/filter/:users\" component={FilterCollectionComponent} />\r\n            <Route path=\"/filter\" component={FilterCollectionComponent} />\r\n            <Route component={NotFound} />\r\n          </Switch>\r\n        </div>\r\n      </Router>\r\n    </Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './Router/App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}